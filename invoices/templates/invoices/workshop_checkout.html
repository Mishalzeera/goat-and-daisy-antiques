{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load crispy_forms_field %}

{% block extra_css %}
<link rel="stylesheet" href="{% static '/css/checkout.css'%}" />
{% endblock %}

{% block preload_js %}
<script src="{% static 'js/checkout.js' %}" defer></script>
{% endblock %}

{% block content%}
<p class="display-5">{{ customer.full_name }}</p>
<form action="#" method="POST">
  {% csrf_token %}
<p>{{ invoice.service_ticket }}</p>
<p>{{ invoice.date_created }}</p>
<p>{{ invoice.email }}</p>
<input type="hidden" name="email" value="{{ invoice.email }}">
<p>{{ invoice.payment_type }}</p>
<input type="hidden" name="payment_type" value="{{ invoice.payment_type }}">

<br>

<p class="small">These are your current shipping details. Update them <a href="{% url 'public_customer_account_update' customer.id %}">
    here.
  </a></p>

<p>{{ invoice.full_name }}</p>
<input type="hidden" name="full_name" value="{{ invoice.full_name }}">

<p>{{ invoice.address1 }}</p>
<input type="hidden" name="address1" value="{{ invoice.address1 }}">

<p>{{ invoice.address2 }}</p>
<input type="hidden" name="address2" value="{{ invoice.address2 }}">

<p>{{ invoice.postcode }}</p>
<input type="hidden" name="postcode" value="{{ invoice.postcode }}">

<p>{{ invoice.town_or_city }}</p>
<input type="hidden" name="town_or_city" value="{{ invoice.town_or_city }}">

<p>{{ invoice.country }}</p>
<input type="hidden" name="country" value="{{ invoice.country }}">

<br>

<p>{{ invoice.order_amount }}</p>
<input type="hidden" name="order_amount" value="{{ invoice.order_amount }}">

<p>{{ invoice.shipping_cost }}</p>
<input type="hidden" name="shipping_cost" value="{{ invoice.shipping_cost }}">

<p>{{ invoice.order_total }}</p>
<input type="hidden" name="order_total" value="{{ invoice.order_total }}">


<input type="submit" value="TEST NO STRIPE">
</form>
  <fieldset>
    <legend>Payment:</legend>
  
    <div id="payment-element">
      <!--Stripe.js injects the Payment Element-->
    </div>
    <p><strong>You will be charged {{ order_total }} at checkout.</strong></p>
    <button type="submit" id="submit">
      <div class="spinner hidden" id="spinner"></div>
      <span id="button-text">Pay now</span>
    </button>
    <div id="payment-message" class="hidden"></div>
  </fieldset>

 




{% csrf_token %}


{% endblock %}

{% block extra_js %}
{{ block.super }}




{% endblock %}